<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RGB LED Controller Library for ESP32 (ESP-IDF): RGB LED Controller Library for ESP32 (ESP-IDF)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="33500808.png"/></td>
  <td id="projectalign">
   <div id="projectname">RGB LED Controller Library for ESP32 (ESP-IDF)<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">This repository contains an implementation of an RGB LED Controller Library, compatible with ESP32 microcontrollers and ESP-IDF version 5.0.2.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">RGB LED Controller Library for ESP32 (ESP-IDF)</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> This repository contains an implementation of an RGB LED Controller Library, compatible with ESP32 microcontrollers and ESP-IDF version 5.0.2.</p>
<p>The library provides asynchronous functionality to initialize and control the brightness and color of RGB LEDs through a Pulse Width Modulation (PWM) interface using ESP-IDF's LED Control (LEDC) module. It leverages the High-Resolution Timer (ESP Timer) module of ESP-IDF, ensuring precise timing and smooth transitions in the lighting effects.</p>
<p>Developers can easily initialize the library and utilize its functions to control the brightness and color of RGB LEDs with precision. The library's asynchronous nature, combined with the High-Resolution Timer (ESP Timer), allows for efficient and accurate handling of LED control operations, enhancing the overall performance and responsiveness of ESP32 projects.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<p>Here's what the RGB LED Controller Library offers:</p>
<ul>
<li><b>Independent LED Control</b>: Each RGB LED can be controlled independently, which allows for complex lighting effects across multiple LEDs. Please note that the maximum number of LEDs that can be controlled simultaneously is limited to 2 due to the LEDC module having only 8 channels available.</li>
<li><b>Color and Brightness Control</b>: The library provides precise control over the color (through RGB values) and brightness (through PWM signal) of each LED.</li>
<li><b>Various Lighting Effects</b>: Several lighting effects are supported including blinking, color transitions, and "breathing" effects (gradual brightening and dimming). Each effect comes with customizable timing parameters to fit a variety of application needs.</li>
<li><b>Easy-to-Use API</b>: The functions provided by the library have a straightforward interface, making it easy to add sophisticated LED control to your ESP32 projects. The API functions are designed to be asynchronous, utilizing the high precision timer module of ESP-IDF, ensuring precise timing and smooth transitions in the lighting effects.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
License</h1>
<p>This software is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">http://creativecommons.org/licenses/by-nc-nd/4.0/</a>. You may not use, distribute, modify, or sell this software without the express permission of the author. For more information, please contact the author <a href="#" onclick="location.href='mai'+'lto:'+'mas'+'si'+'mod'+'al'+'lab'+'on'+'a@g'+'ma'+'il.'+'co'+'m'; return false;">here</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Installation</h1>
<p>Follow the steps below to install the RGB LED Controller library:</p>
<ol type="1">
<li><p class="startli">First, clone this repository to your local machine. You can do this by navigating to the directory where you want to clone the repository and then using the following command in your terminal:</p>
<div class="fragment"><div class="line">https://github.com/MDB80/rgb_ledc_controller.git</div>
</div><!-- fragment --></li>
<li>Open your ESP-IDF project in Visual Studio Code.</li>
<li>In the Explorer sidebar, you'll see your project structure. Navigate to the <code>components</code> directory in your project.</li>
<li>The library is now ready to be used in your project. To use it, include the <code><a class="el" href="rgb__ledc__controller_8h.html" title="File containing the implementation of the RGB LED control library.">rgb_ledc_controller.h</a></code> file in your source code. The ESP-IDF build system will automatically build and link the library.</li>
</ol>
<h1><a class="anchor" id="autotoc_md4"></a>
Documentation</h1>
<p>Technical documentation for the RGB LED Controller Library is available <a href="documentation/index.html">here</a>. It provides detailed information about the library's usage, API reference, and examples.</p>
<p>We encourage you to refer to the documentation for a better understanding of the library's capabilities and how to integrate it into your ESP32 projects.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Contributing</h1>
<p>Thank you for your interest in contributing to this project. If you would like to make contributions, please reach out to me <a href="#" onclick="location.href='mai'+'lto:'+'mas'+'si'+'mod'+'al'+'lab'+'on'+'a@g'+'ma'+'il.'+'co'+'m'; return false;">here</a> to discuss your ideas and obtain permission. I appreciate your understanding and cooperation in this matter.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Donation</h1>
<p>If you find this project useful and want to support my work, you can make a donation via PayPal. Alternatively, if you'd like to treat me to a nice beer üç∫ or a coffee ‚òï, that would also be much appreciated! Any amount, no matter how small, is greatly appreciated and will be used to continue the development and maintenance of this project.</p>
<p>Thank you for your support!</p>
<p><a href="https://www.paypal.com/donate/?hosted_button_id=RHJS8QKDZBNVN"><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" alt="Donate" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Example</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rgb__ledc__controller_8h.html">rgb_ledc_controller.h</a>&quot;</span> <span class="comment">// Include the header file for the RGB LED functions</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define the GPIO pins for the Red, Green, and Blue LEDs</span></div>
<div class="line"><span class="preprocessor">#define GPIO_LED_RED 18  </span></div>
<div class="line"><span class="preprocessor">#define GPIO_LED_GREEN 19</span></div>
<div class="line"><span class="preprocessor">#define GPIO_LED_BLUE 20 </span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define colors as RGB values in hexadecimal</span></div>
<div class="line"><span class="preprocessor">#define RED     0xFF0000 </span><span class="comment">// Red color</span></div>
<div class="line"><span class="preprocessor">#define GREEN   0x00FF00 </span><span class="comment">// Green color</span></div>
<div class="line"><span class="preprocessor">#define BLUE    0x0000FF </span><span class="comment">// Blue color</span></div>
<div class="line"><span class="preprocessor">#define YELLOW  0xFFFF00 </span><span class="comment">// Yellow color (combination of Red and Green)</span></div>
<div class="line"><span class="preprocessor">#define VIOLET  0xEE82EE </span><span class="comment">// Violet color</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The main function of the program</span></div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Create an instance of the RGB LED structure and initialize it with the defined GPIO pins and LEDC channels</span></div>
<div class="line">    <a class="code hl_struct" href="structrgb__led__t.html">rgb_led_t</a> led1 = <a class="code hl_function" href="rgb__ledc__controller_8c.html#a1fa5c599a3b8b8af55c7016b11f91e33">rgb_led_new</a>(GPIO_LED_RED, GPIO_LED_GREEN, GPIO_LED_BLUE, LEDC_CHANNEL_0, LEDC_CHANNEL_1, LEDC_CHANNEL_2);</div>
<div class="line">    <span class="comment">//...you can add one more eg: led2.It is limited to 2 leds due to the LEDC module having only 8 channels available.</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Initialize the RGB LED, check for any errors during the process</span></div>
<div class="line">    ESP_ERROR_CHECK(<a class="code hl_function" href="rgb__ledc__controller_8c.html#a60a7dd657dd7d5e38c3a5c4cde865895">rgb_led_init</a>(&amp;led1));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Main loop of the program</span></div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>){</div>
<div class="line">        <span class="comment">// Start a &quot;breathing&quot; effect with the Red color and a period of 100ms</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#abe586b61d180019896278a0687d0ef1e">rgb_led_start_breath_effect</a>(&amp;led1, RED, 100);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Start a blinking effect with the Green color. Blink 3 times, each blink lasts 500ms, and the time between blinks is 500ms. The total effect duration is 3000ms.</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#a103a50617970d8b886f47ebe810bc598">rgb_led_start_blink_effect</a>(&amp;led1, GREEN, 3, 500, 500, 3000);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Start a &quot;breathing&quot; effect with the Blue color and a period of 100ms</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#abe586b61d180019896278a0687d0ef1e">rgb_led_start_breath_effect</a>(&amp;led1, BLUE, 100);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Start a blinking effect with the Yellow color. Blink 3 times, each blink lasts 500ms, and the time between blinks is 500ms. The total effect duration is 3000ms.</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#a103a50617970d8b886f47ebe810bc598">rgb_led_start_blink_effect</a>(&amp;led1, YELLOW, 3, 500, 500, 3000);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Start a color transition effect from Yellow to Red, the total effect duration is 5000ms.</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#a7ddae29edb1a94d42b81afefe848ef56">rgb_led_start_transition_effect</a>(&amp;led1, YELLOW,RED, 5000);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Set the LED color Fixed to Violet</span></div>
<div class="line">        <a class="code hl_function" href="rgb__ledc__controller_8c.html#a5e05fccc4050240e6e96d108b9c72f99">rgb_led_set_color</a>(&amp;led1,VIOLET);</div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(5000)); <span class="comment">// Delay for 5 seconds</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="argb__ledc__controller_8c_html_a103a50617970d8b886f47ebe810bc598"><div class="ttname"><a href="rgb__ledc__controller_8c.html#a103a50617970d8b886f47ebe810bc598">rgb_led_start_blink_effect</a></div><div class="ttdeci">esp_err_t rgb_led_start_blink_effect(rgb_led_t *rgb_led, uint32_t color, uint8_t pulse_count, uint32_t time_on, uint32_t time_off, uint32_t time_out)</div><div class="ttdoc">Start a blink effect for the specified LED.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00801">rgb_ledc_controller.c:801</a></div></div>
<div class="ttc" id="argb__ledc__controller_8c_html_a1fa5c599a3b8b8af55c7016b11f91e33"><div class="ttname"><a href="rgb__ledc__controller_8c.html#a1fa5c599a3b8b8af55c7016b11f91e33">rgb_led_new</a></div><div class="ttdeci">rgb_led_t rgb_led_new(gpio_num_t red_pin, gpio_num_t green_pin, gpio_num_t blue_pin, ledc_channel_t red_ch, ledc_channel_t green_ch, ledc_channel_t blue_ch)</div><div class="ttdoc">Create and initialize a new RGB LED instance.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00321">rgb_ledc_controller.c:321</a></div></div>
<div class="ttc" id="argb__ledc__controller_8c_html_a5e05fccc4050240e6e96d108b9c72f99"><div class="ttname"><a href="rgb__ledc__controller_8c.html#a5e05fccc4050240e6e96d108b9c72f99">rgb_led_set_color</a></div><div class="ttdeci">esp_err_t rgb_led_set_color(rgb_led_t *rgb_led, uint32_t color)</div><div class="ttdoc">Set the color of an RGB LED.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00291">rgb_ledc_controller.c:291</a></div></div>
<div class="ttc" id="argb__ledc__controller_8c_html_a60a7dd657dd7d5e38c3a5c4cde865895"><div class="ttname"><a href="rgb__ledc__controller_8c.html#a60a7dd657dd7d5e38c3a5c4cde865895">rgb_led_init</a></div><div class="ttdeci">esp_err_t rgb_led_init(rgb_led_t *rgb_led_cfg)</div><div class="ttdoc">Initialize the LEDC to control an RGB LED.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00211">rgb_ledc_controller.c:211</a></div></div>
<div class="ttc" id="argb__ledc__controller_8c_html_a7ddae29edb1a94d42b81afefe848ef56"><div class="ttname"><a href="rgb__ledc__controller_8c.html#a7ddae29edb1a94d42b81afefe848ef56">rgb_led_start_transition_effect</a></div><div class="ttdeci">esp_err_t rgb_led_start_transition_effect(rgb_led_t *rgb_led, uint32_t current_color, uint32_t new_color, uint32_t effect_duration)</div><div class="ttdoc">Initiates a transition effect for the RGB LED.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00660">rgb_ledc_controller.c:660</a></div></div>
<div class="ttc" id="argb__ledc__controller_8c_html_abe586b61d180019896278a0687d0ef1e"><div class="ttname"><a href="rgb__ledc__controller_8c.html#abe586b61d180019896278a0687d0ef1e">rgb_led_start_breath_effect</a></div><div class="ttdeci">esp_err_t rgb_led_start_breath_effect(rgb_led_t *rgb_led, uint32_t color, uint16_t duration_ms)</div><div class="ttdoc">Start the breath effect for the specified LED.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8c_source.html#l00723">rgb_ledc_controller.c:723</a></div></div>
<div class="ttc" id="argb__ledc__controller_8h_html"><div class="ttname"><a href="rgb__ledc__controller_8h.html">rgb_ledc_controller.h</a></div><div class="ttdoc">File containing the implementation of the RGB LED control library.</div></div>
<div class="ttc" id="astructrgb__led__t_html"><div class="ttname"><a href="structrgb__led__t.html">rgb_led_t</a></div><div class="ttdoc">Structure to hold RGB LED configuration.</div><div class="ttdef"><b>Definition</b> <a href="rgb__ledc__controller_8h_source.html#l00039">rgb_ledc_controller.h:40</a></div></div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md8"></a>
Output</h1>
<div class="fragment"><div class="line">I (1307) gpio: GPIO[18]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:0</div>
<div class="line">I (1316) gpio: GPIO[19]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:0</div>
<div class="line">I (1325) gpio: GPIO[20]| InputEn: 0| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:0</div>
<div class="line">I (1335) LED_RGB: Started breath effect for LED</div>
<div class="line">I (6340) LED_RGB: Breath effect stopped for LED</div>
<div class="line">I (11340) LED_RGB: Blink effect stopped for LED</div>
<div class="line">I (11340) LED_RGB: Started breath effect for LED</div>
<div class="line">I (16340) LED_RGB: Breath effect stopped for LED</div>
<div class="line">I (21340) LED_RGB: Blink effect stopped for LED</div>
<div class="line">I (21340) LED_RGB: Transition effect started for LED</div>
<div class="line">I (26340) LED_RGB: Transition effect stopped for LED</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
